----------------------------0409------------------------------------------

CREATE TABLE CUSTOMER(
	CUST_CD VARCHAR(10) NOT NULL,
	CUST_NM VARCHAR(20) NOT NULL,
	CUST_AGE INT DEFAULT 0,
	CUST_LVL VARCHAR(10),
	CUST_JOB VARCHAR(20),
	CUST_POINT INT DEFAULT 0,
	PRIMARY KEY (CUST_CD),
);

CREATE TABLE PRODUCTS(
	PROD_CD VARCHAR(10) NOT NULL,
	PROD_NM VARCHAR(20) NOT NULL,
	PROD_QY INT DEFAULT 0,
	PROD_PRI INT DEFAULT 0,
	PROD_VEND VARCHAR(20),
	PRIMARY KEY (PROD_CD)
);

CREATE TABLE ORDERS(
	ORD_CD VARCHAR(10) NOT NULL,
	CUST_CD VARCHAR(10),
	PROD_CD VARCHAR(10) DEFAULT 0,
	ORD_QTY INT, 
	ORD_PRI INT DEFAULT 0,
	ORD_ADD VARCHAR(20),
	ORD_REGDT DATETIME DEFAULT GETDATE(),
	PRIMARY KEY (ORD_CD),
	FOREIGN KEY (CUST_CD) REFERENCES CUSTOMER(CUST_CD),
	FOREIGN KEY (PROD_CD) REFERENCES PRODUCTS(PROD_CD)
);

-- ORD_PRI 직접 수량, 금액 곱해서 INSERT 하기

CREATE TABLE SELL (
	ORD_CD VARCHAR(10) NOT NULL,
	SL_PRI INT DEFAULT 0,
	SL_REGDT DATETIME DEFAULT GETDATE(),
	SL_ADD VARCHAR(20),
	SL_CUS VARCHAR(10)
	PRIMARY KEY (ORD_CD),
	FOREIGN KEY (ORD_CD) REFERENCES ORDERS(ORD_CD)
);
-- 주문테이블의 PRI 와 동일하게

SELECT * FROM CUSTOMER;
SELECT * FROM PRODUCTS;
SELECT * FROM ORDERS;
SELECT * FROM SELL;

DELETE FROM ORDERS;
DROP TABLE ORDERS;
DROP TABLE SELL;
DROP TABLE PRODUCTS;

INSERT INTO CUSTOMER (CUST_CD, CUST_NM, CUST_AGE, CUST_LVL, CUST_JOB, CUST_POINT)
 VALUES ('APPLE', '정소화', 20, 'GOLD', 'STUDENT', 1000);
INSERT INTO CUSTOMER (CUST_CD, CUST_NM, CUST_AGE, CUST_LVL, CUST_JOB, CUST_POINT)
 VALUES ('BANANA', '김선우', 25, 'VIP', 'NURSE', 2500);
INSERT INTO CUSTOMER (CUST_CD, CUST_NM, CUST_AGE, CUST_LVL, CUST_JOB, CUST_POINT)
 VALUES ('CARROT', '고명석', 28, 'GOLD', 'TEACHER', 4500);
INSERT INTO CUSTOMER (CUST_CD, CUST_NM, CUST_AGE, CUST_LVL, CUST_JOB)
 VALUES ('ORANGE', '김용욱', 22, 'SILVER', 'STUDENT');
INSERT INTO CUSTOMER (CUST_CD, CUST_NM, CUST_AGE, CUST_LVL, CUST_JOB, CUST_POINT)
 VALUES ('MELON', '성원용', 35, 'GOLD', 'OFFICER', 5000);
INSERT INTO CUSTOMER (CUST_CD, CUST_NM, CUST_AGE, CUST_LVL, CUST_JOB, CUST_POINT)
 VALUES ('PEACH', '오형준', 30, 'SILVER', 'DOCTOR', 300);
INSERT INTO CUSTOMER (CUST_CD, CUST_NM, CUST_AGE, CUST_LVL, CUST_JOB, CUST_POINT)
 VALUES ('PEAR', '채광주', 31, 'SILVER', 'OFFICER', 500);
INSERT INTO CUSTOMER (CUST_CD, CUST_NM, CUST_AGE, CUST_LVL, CUST_JOB, CUST_POINT)
 VALUES ('CHERRY', '이승준', 27, 'VIP', 'OFFICER', 5500);
INSERT INTO CUSTOMER (CUST_CD, CUST_NM, CUST_AGE, CUST_LVL, CUST_JOB)
 VALUES ('TOMATO', '이나은', 23, 'BRONZE', 'TEACHER');
INSERT INTO CUSTOMER (CUST_CD, CUST_NM, CUST_AGE, CUST_LVL, CUST_JOB)
 VALUES ('LEMON', '정태을', 30, 'BRONZE', 'POLICE');

UPDATE CUSTOMER SET CUST_AGE = 31 WHERE CUST_CD = 'PEAR';


INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P01', 'DUMPLING', 5000, 4500, '대한식품');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P02', 'SPICY NOODLE', 2500, 5500, '민국푸드');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P03', 'PIE', 3600, 2600, '한빛제과');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P04', 'CHOCOLATE', 1250, 2500, '한빛제과');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P05', 'RAMEN', 2200, 1200, '대한식품');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P06', 'UDONG', 1000, 1550, '민국푸드');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P07', 'BISCUIT', 1650, 1500, '한빛제과');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P08', 'CANDY', 560, 2000, '과자제국');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P09', 'JELLY', 3550, 3200, '과자제국');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P10', 'COOKIE', 3000, 1700, '과자제국');


INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD, ORD_REGDT)
 VALUES ('O01', 'APPLE', 'P03', 10, 26000, '서울시 마포구', '2020-01-01');
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD, ORD_REGDT)
 VALUES ('O02', 'MELON', 'P01', 5, 22500, '인천시 계양구', '2020-01-10');
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD, ORD_REGDT)
 VALUES ('O03', 'BANANA', 'P06', 45, 69750, '경기도 부천시', '2020-01-11');
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD, ORD_REGDT)
 VALUES ('O04', 'CARROT', 'P02', 8, 44000, '부산시 금정구', '2020-02-01');
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD, ORD_REGDT)
 VALUES ('O05', 'MELON', 'P06', 36, 55800, '경기도 용인시', '2020-02-20');
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD, ORD_REGDT)
 VALUES ('O06', 'BANANA', 'P01', 19, 85500, '충청북도 보은군', '2020-03-02');
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD, ORD_REGDT)
 VALUES ('O07', 'APPLE', 'P03', 22, 57200, '서울시 영등포구', '2021-03-15');
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD, ORD_REGDT)
 VALUES ('O08', 'PEAR', 'P02', 50, 275000, '강원도 춘천시', '2021-04-10');
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD)
 VALUES ('O09', 'BANANA', 'P04', 15, 37500, '전라남도 목포시');
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD)
 VALUES ('O10', 'CARROT', 'P03', 20, 52000, '서울시 마포구');



 -------------------------------------TEACHER'S ORDER------------------------------------------
-- O01, O02, O03 판매완료
INSERT INTO SELL (ORD_CD, SL_PRI, SL_REGDT, SL_ADD, SL_CUS)
 VALUES ('O01', 26000, '2021-01-01', '서울시 마포구', 'APPLE');
INSERT INTO SELL (ORD_CD, SL_PRI, SL_REGDT, SL_ADD, SL_CUS)
 VALUES ('O02', 22500, '2020-01-10', '인천시 계양구', 'MELON');
INSERT INTO SELL (ORD_CD, SL_PRI, SL_REGDT, SL_ADD, SL_CUS)
 VALUES ('O03', 69750, '2020-01-11', '경기도 부천시', 'BANANA');

UPDATE SELL SET SL_REGDT = '2020-01-01' WHERE ORD_CD = 'O01';
SELECT * FROM SELL;

-- APPLE 회원 탈퇴
SELECT * FROM SELL WHERE SL_CUS = 'APPLE';
DELETE FROM SELL WHERE SL_CUS = 'APPLE';
DELETE FROM ORDERS WHERE CUST_CD = 'APPLE';
DELETE FROM CUSTOMER WHERE CUST_CD = 'APPLE';

-- 새제품 2개 추가
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P11', 'AMERICANO', 8000, 3500, '커피하우스');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P12', 'CAFE LATTE', 7000, 4000, '커피하우스');
INSERT INTO PRODUCTS (PROD_CD, PROD_NM, PROD_QY, PROD_PRI, PROD_VEND)
 VALUES ('P13', 'GREEN TEA', 6500, 3700, '커피하우스');

 -- 바나나 P04 20개 제품 구매
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD)
 VALUES ('O11', 'BANANA', 'P04', 20, 50000, '서울시 강남구');

 -- O04 판매완료
INSERT INTO SELL (ORD_CD, SL_PRI, SL_REGDT, SL_ADD, SL_CUS)
 VALUES ('O04', 44000, '2020-02-02', '부산시 금정구', 'CARROT');

 -- ORANGE 회원탈퇴
 SELECT * FROM CUSTOMER WHERE CUST_CD = 'ORANGE';
DELETE FROM CUSTOMER WHERE CUST_CD = 'ORANGE';

 -- 모든 고객 기존 적립금 50% 올려줌(재가입 고객 적립금 2000원으로 상승)
UPDATE CUSTOMER SET CUST_POINT = (CUST_POINT * 1.5);

 -- 바나나 적립금 2500 올림
UPDATE CUSTOMER SET CUST_POINT = (CUST_POINT + 2500) WHERE CUST_CD = 'BANANA';

 -- 주문4개 판매완료
 INSERT INTO SELL (ORD_CD, SL_PRI, SL_REGDT, SL_ADD, SL_CUS)
 VALUES ('O05', 55800, '2020-02-20', '경기도 용인시', 'MELON');
 INSERT INTO SELL (ORD_CD, SL_PRI, SL_REGDT, SL_ADD, SL_CUS)
 VALUES ('O06', 85500, '2020-03-02', '충청북도 보은군', 'BANANA');
 INSERT INTO SELL (ORD_CD, SL_PRI, SL_REGDT, SL_ADD, SL_CUS)
 VALUES ('O07', 57200, '2021-03-15', '서울시 영등포구', 'APPLE');
 INSERT INTO SELL (ORD_CD, SL_PRI, SL_REGDT, SL_ADD, SL_CUS)
 VALUES ('O08', 275000, '2021-04-10', '강원도 춘천시', 'PEAR');


 -- MELON고객 P05제품 30개 구매
INSERT INTO ORDERS (ORD_CD, CUST_CD, PROD_CD, ORD_QTY, ORD_PRI, ORD_ADD, ORD_REGDT)
VALUES ('O12', 'MELON', 'P05', 30, 36000, '인천시 연수구', '2021-04-09');

-- 주문2개 판매
 INSERT INTO SELL (ORD_CD, SL_PRI, SL_REGDT, SL_ADD, SL_CUS)
 VALUES ('O09', 37500, '2021-04-09', '전라남도 목포시', 'BANANA');
 INSERT INTO SELL (ORD_CD, SL_PRI, SL_REGDT, SL_ADD, SL_CUS)
 VALUES ('O10', 52000, '2021-04-09', '서울시 마포구', 'CARROT');

SELECT * FROM CUSTOMER;
SELECT * FROM PRODUCTS;
SELECT * FROM ORDERS;
SELECT * FROM SELL;
